/**
 * Mobile Optimization Styles
 * ==========================
 * Touch-friendly controls and mobile-specific optimizations.
 */

/* ============================================
   TOUCH-FRIENDLY CONTROLS
   ============================================ */

/* Minimum touch target size (44x44 per WCAG) */
@media (pointer: coarse) {
	button,
	[role="button"],
	input[type="checkbox"],
	input[type="radio"],
	.cw-btn,
	.touch-target {
		min-height: 44px;
		min-width: 44px;
	}

	/* Larger tap targets for form elements */
	input[type="text"],
	input[type="number"],
	input[type="email"],
	input[type="password"],
	input[type="search"],
	select,
	textarea,
	.cw-input {
		min-height: 48px;
		font-size: 16px; /* Prevents iOS zoom on focus */
		padding: 12px;
	}

	/* Increase spacing between interactive elements */
	.touch-spacing > * {
		margin-bottom: 12px;
	}

	/* Larger checkbox/radio hitboxes */
	input[type="checkbox"],
	input[type="radio"] {
		width: 24px;
		height: 24px;
	}
}

/* ============================================
   MOBILE NAVIGATION
   ============================================ */

/* Mobile bottom navigation bar */
.mobile-nav {
	display: none;
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	background: var(--cw-panel-background, #0F1419);
	border-top: 1px solid var(--cw-border, #1E2A36);
	z-index: var(--cw-z-sticky, 200);
	padding-bottom: env(safe-area-inset-bottom); /* iPhone notch support */
}

@media (max-width: 768px) {
	.mobile-nav {
		display: flex;
		justify-content: space-around;
		align-items: center;
	}

	/* Add padding to bottom of page for nav bar */
	.mobile-nav-padding {
		padding-bottom: calc(60px + env(safe-area-inset-bottom));
	}

	/* Hide desktop navigation on mobile */
	.desktop-nav {
		display: none !important;
	}
}

.mobile-nav-item {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	padding: 8px 12px;
	min-width: 64px;
	min-height: 56px;
	color: var(--cw-secondary-text, #8B949E);
	text-decoration: none;
	transition: color 150ms ease;
}

.mobile-nav-item:hover,
.mobile-nav-item:focus,
.mobile-nav-item.active {
	color: var(--cw-accent-primary, #58A6FF);
}

.mobile-nav-item .icon {
	font-size: 24px;
	margin-bottom: 2px;
}

.mobile-nav-item .label {
	font-size: 10px;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

/* ============================================
   MOBILE LAYOUT ADJUSTMENTS
   ============================================ */

@media (max-width: 640px) {
	/* Full-width panels on mobile */
	.cw-panel,
	.cw-card {
		border-radius: 0;
		margin-left: -1rem;
		margin-right: -1rem;
		padding-left: 1rem;
		padding-right: 1rem;
	}

	/* Stack horizontal layouts vertically */
	.mobile-stack {
		flex-direction: column !important;
	}

	.mobile-stack > * {
		width: 100% !important;
	}

	/* Full-width buttons on mobile */
	.mobile-full-width {
		width: 100% !important;
	}

	/* Hide on mobile */
	.mobile-hidden {
		display: none !important;
	}

	/* Show only on mobile */
	.mobile-only {
		display: block !important;
	}

	/* Reduce spacing on mobile */
	.mobile-compact {
		padding: 0.75rem !important;
	}

	/* Mobile-friendly tables */
	.mobile-table {
		display: block;
		overflow-x: auto;
		-webkit-overflow-scrolling: touch;
	}

	/* Mobile modal adjustments */
	.mobile-modal {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		margin: 0;
		border-radius: 0;
		max-height: 100vh;
		max-width: 100vw;
	}

	/* Larger text for readability */
	.mobile-text-lg {
		font-size: 1.125rem !important;
	}
}

/* ============================================
   MOBILE GESTURES & INTERACTIONS
   ============================================ */

/* Pull-to-refresh indicator */
.pull-refresh {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	height: 48px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--cw-panel-background, #0F1419);
	transform: translateY(-100%);
	transition: transform 300ms ease;
	z-index: var(--cw-z-sticky, 200);
}

.pull-refresh.active {
	transform: translateY(0);
}

.pull-refresh .spinner {
	width: 24px;
	height: 24px;
	border: 2px solid var(--cw-border, #1E2A36);
	border-top-color: var(--cw-accent-primary, #58A6FF);
	border-radius: 50%;
	animation: spin 1s linear infinite;
}

@keyframes spin {
	to {
		transform: rotate(360deg);
	}
}

/* Swipe actions container */
.swipe-actions {
	position: relative;
	overflow: hidden;
}

.swipe-actions-content {
	transition: transform 200ms ease;
}

.swipe-actions-left,
.swipe-actions-right {
	position: absolute;
	top: 0;
	bottom: 0;
	display: flex;
	align-items: center;
}

.swipe-actions-left {
	left: 0;
	transform: translateX(-100%);
}

.swipe-actions-right {
	right: 0;
	transform: translateX(100%);
}

/* ============================================
   MOBILE PERFORMANCE
   ============================================ */

/* Hardware acceleration for smooth scrolling */
.mobile-scroll {
	-webkit-overflow-scrolling: touch;
	transform: translateZ(0);
}

/* Prevent text selection on touch interactions */
.no-select {
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	user-select: none;
}

/* Disable hover states on touch devices */
@media (hover: none) {
	.hover-effect:hover {
		background: transparent;
	}
}

/* ============================================
   SAFE AREA INSETS (Notched phones)
   ============================================ */

.safe-area-top {
	padding-top: env(safe-area-inset-top);
}

.safe-area-bottom {
	padding-bottom: env(safe-area-inset-bottom);
}

.safe-area-left {
	padding-left: env(safe-area-inset-left);
}

.safe-area-right {
	padding-right: env(safe-area-inset-right);
}

/* ============================================
   MOBILE UTILITIES
   ============================================ */

/* Prevent horizontal scroll */
.overflow-x-hidden {
	overflow-x: hidden;
}

/* Momentum scrolling */
.scroll-smooth {
	scroll-behavior: smooth;
	-webkit-overflow-scrolling: touch;
}

/* Fix iOS input zoom */
@supports (-webkit-touch-callout: none) {
	input[type="text"],
	input[type="email"],
	input[type="password"],
	input[type="number"],
	select,
	textarea {
		font-size: 16px;
	}
}

/* Landscape mode adjustments */
@media (max-height: 500px) and (orientation: landscape) {
	.mobile-nav {
		padding: 4px 0;
	}

	.mobile-nav-item {
		min-height: 44px;
		padding: 4px 12px;
	}

	.mobile-nav-item .label {
		display: none;
	}
}
